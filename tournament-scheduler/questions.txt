1. How can I view all players in one place for a tournament - is there an API for this?

ANSWER:
Yes! There are multiple ways to view all players for a tournament:

A) Via API - Get tournament details (includes all registered players):
   Endpoint: GET /api/tournaments/{tournament_id}

   Example:
   curl http://localhost:3000/api/tournaments/f66e0583-8234-4a83-83bc-4c85308ed540

   Response includes:
   {
     "tournament": {...},
     "registrations": [
       {
         "id": "...",
         "seed": 1,
         "player": {
           "id": "...",
           "name": "Player Name",
           "email": "player@example.com",
           "dupr": 4.5
         }
       },
       ...
     ],
     "matches": [...],
     "teams": [...]
   }

B) Via API - Get just players (if endpoint exists):
   Note: Currently players are fetched as part of registrations in the tournament detail endpoint.

C) Via UI - Tournament Detail Page:
   Visit: http://localhost:3000/tournaments/{tournament_id}
   The old bracket view showed a "Players" sidebar with all registered players.

   In the new fixtures UI, you can see all teams (which contain players) in the Table tab,
   which shows all teams across all pools with their player names.

RECOMMENDATION: Use GET /api/tournaments/{tournament_id} - it returns everything you need including all players via the registrations array.


2. How can a refree submit a score for a match - is there a UI for this - what end point should I hit? I want to demo how the match status is updated - give me a list of steps

ANSWER:

METHOD 1 - Using the Match Detail UI (Recommended):
========================================

Step-by-step to demo match status update:

1. Get a match ID from your tournament:
   curl http://localhost:3000/api/tournaments/f66e0583-8234-4a83-83bc-4c85308ed540
   # Copy any match ID from the "matches" array

2. Navigate to the match detail page in browser:
   http://localhost:3000/matches/{match_id}

   Example:
   http://localhost:3000/matches/ef88a07c-ea09-4f55-a6ba-c2c00f68bcdb

3. On the match detail page, you'll see:
   - Both teams/players
   - A score entry form (for scheduled matches)
   - Three game score inputs (Game 1, Game 2, Game 3)
   - Submit Score button

4. Enter scores in the form:
   - Game 1: Team A: 11, Team B: 8
   - Game 2: Team A: 9, Team B: 11
   - Game 3: Team A: 11, Team B: 7

5. Click "Submit Score"
   - Match status changes to "finished"
   - Winner is automatically determined (Team A in this case)
   - You're redirected back to tournament page
   - If you have the tournament page open in another tab, it will update in real-time via Supabase Realtime

6. Verify the update:
   - Go to Fixtures tab - match shows "Completed" status
   - Go to Standings tab - team's stats are updated
   - Go to Table tab - overall rankings reflect the win


METHOD 2 - Using the API directly:
====================================

Endpoint: POST /api/matches/{match_id}/score

Request body:
{
  "games": [
    {"a": 11, "b": 8},
    {"a": 9, "b": 11},
    {"a": 11, "b": 7}
  ],
  "winner": "{team_id}"  // Optional - will be auto-calculated
}

Full example:

# Step 1: Get a match to update
curl http://localhost:3000/api/tournaments/f66e0583-8234-4a83-83bc-4c85308ed540 | jq '.matches[0]'

# Step 2: Note the match ID and team IDs from the response
# Example:
# match_id: ef88a07c-ea09-4f55-a6ba-c2c00f68bcdb
# team_a_id: 0b7464e9-8d43-47fb-b282-6a4c1c0cae53
# team_b_id: 8952c172-7978-4127-a902-bf46f5f4a7f8

# Step 3: Submit the score
curl -X POST http://localhost:3000/api/matches/ef88a07c-ea09-4f55-a6ba-c2c00f68bcdb/score \
  -H 'Content-Type: application/json' \
  -d '{
    "games": [
      {"a": 11, "b": 8},
      {"a": 9, "b": 11},
      {"a": 11, "b": 7}
    ],
    "winner": "0b7464e9-8d43-47fb-b282-6a4c1c0cae53"
  }'

# Step 4: Verify the match is now finished
curl http://localhost:3000/api/matches/ef88a07c-ea09-4f55-a6ba-c2c00f68bcdb | jq '.match.status'
# Should return: "finished"

# Step 5: Check standings are updated
# Visit http://localhost:3000/tournaments/f66e0583-8234-4a83-83bc-4c85308ed540
# Click "Standings" tab - you'll see the winning team's stats updated


METHOD 3 - Using PATCH endpoint (for score_a/score_b fields):
==============================================================

Note: There's also a PATCH endpoint, but it has some foreign key constraint issues with the winner field.
The POST /score endpoint is more reliable.

Endpoint: PATCH /api/matches/{match_id}

Request body:
{
  "score_a": 11,
  "score_b": 9,
  "status": "completed"
}

This endpoint auto-determines the winner based on scores, but may have DB constraint issues.
Use the POST /score endpoint instead.


DEMO SCRIPT FOR SHOWING LIVE UPDATES:
======================================

1. Open two browser windows side by side

2. Window 1: Tournament Fixtures page
   http://localhost:3000/tournaments/f66e0583-8234-4a83-83bc-4c85308ed540
   Keep it on the "Fixtures" tab, Pool A selected

3. Window 2: Match detail page for a Pool A match
   http://localhost:3000/matches/{match_id}

4. In Window 2 (Match page):
   - Enter scores for 3 games
   - Click "Submit Score"

5. Watch Window 1 (Tournament page):
   - The match card will automatically update to show "Completed" status
   - The score will appear
   - (Real-time via Supabase Realtime subscriptions)

6. Click "Standings" tab in Window 1:
   - Pool A standings will show the updated wins/losses/points

7. Click "Table" tab:
   - Overall rankings will reflect the result


FILE LOCATIONS:
===============
- Match Detail UI: src/app/matches/[id]/page.tsx
- Score Submission API: src/app/api/matches/[id]/score/route.ts
- Match PATCH API: src/app/api/matches/[id]/route.ts (PATCH handler)
- Tournament Fixtures UI: src/components/TournamentFixtures.tsx
- Tournament Page: src/app/tournaments/[id]/page.tsx